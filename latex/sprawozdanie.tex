\documentclass{article}
\usepackage{polski} %może wymagac dokonfigurowania latexa, ale jest lepszy niż standardowy babel'owy [polish]
\usepackage[utf8]{inputenc}
\usepackage[OT4]{fontenc}
\usepackage{amsfonts}
\usepackage{graphicx,color} %include pdf's (and png's for raster graphics... avoid raster graphics!)
\usepackage{url}
\usepackage[pdftex,hyperfootnotes=false,pdfborder={0 0 0}]{hyperref} %za wszystkimi pakietami; pdfborder nie wszedzie tak samo zaimplementowane bo specyfikacja nieprecyzyjna; pod miktex'em po prostu nie widac wtedy ramek


\input{_ustawienia.tex}

\begin{document}

\input{_tytulowa}

\begin{abstract}
QAP jest jednym z podstawowych problemów kombinatorycznych i jest on NP-trudny. Stąd do jego rozwiązania stosuje się algorytmy heurystyczne, takie jak przeszukiwanie lokalne. W sprawozdaniu przedstawiamy porównanie dwóch najprostszych wersji Local Search: Greedy i Steepest.
\end{abstract}


\section{Wstęp}
	\subsection{Opis problemu}
	\emph{QAP (Quadratic Assignement Problem)} jest jednym z podstawowych problemów kombinatorycznych. Mając dane dwa równoliczne zbiory $W$(,,wydziały") i $L$(,,lokalizacje") oraz dwie funkcje (lub po prostu macierze): odległości $o:  L \times L \rightarrow \mathbb{R} $ oraz przepływów $p: W \times W \rightarrow \mathbb{R} $. Celem optymalizacji jest znalezinie takiej funkcji $ f: W \rightarrow B $  przydziału elementów z $W$ do elementów z $B$ , która minimalizuje funkcję:
	$$\sum_{a,b \in W}o(a,b)\times p(f(a),f(b))$$
	QAP może modelować następującą sytuację: w pewnej firmie jest $n$ wydziałów, ich zbiór oznaczymy przez $W$ oraz $n$ lokalizacji (budynki, pomieszczenia, miasta), których zbiór oznaczony jest przez $L$. Znane są odległości między lokalizacjami (funkcja $o$) oraz natężenie (przepływ) ruchu pomiędzy wydziałami (funkcja $p$). Koszt ruchu między wydziałami to odległość pomiędzy lokalizacjami do których są one przypisane pomnożony przez natężenie ruchu między tymi wydziałami. Należy tak przyporządkować wydziały do lokalizacji (definiując funkcję $f$) żeby łączny koszt ruchu między wydziałami był jak najmniejszy.

	Zastosowania \emph{QAP}:
	\begin{itemize}
		\item{projektowanie układów elektronicznych}
		\item{rozmieszczanie fabryk, centrów dystrybucji itp.}
	\end{itemize}
	
	\emph{QAP} jest problemem \emph{NP-trudnym}, stąd do znalezienia rozwiązania stosuje się heurystyki. W dalszej części dokumentu przedstawiono porównanie algorytmów przeszukiwania lokalnego (\emph{Local Search}): \emph{Greedy} i~\emph{Steepest} oraz algorytmu losowego (\emph{Random Search}) i~prostej heurystyki. Wszystkie algorytmy zostały zaimplementowane w~języku Python 2.7 i~testowane na komputerze z procesorem Intel Core 2 Duo 2.0 GHz. Do obliczeń wykorzystano jeden rdzeń procesora.

	\subsection{Użyty operator sąsiedztwa}
	Rozwiązanie jest reprezentowane przez permutację zbioru wydziałów - umiejscowienie $m$-tego wydziału na $k$-tym miejscu permutacji przypisuje go do $k$-tej lokalizacji.
	Użyty operator sąsiedztwa to \emph{2-opt}, czyli sąsiednie rozwiązanie powstaje przez zamianę 2~elementów w~permutacji będącej reprezentacją rozwiązania.

\section{Eksperymenty}
	\subsection{Porównanie działania algorytmów}
		\subsubsection{Czas działania}Na rysunku \ref{fig:time} pokazano porównanie czasu działania algorytmów dla różnych instancji \emph{QAP}.
			\begin{figure}[h]
				\includegraphics[scale=0.90]{../results/time}
				\caption{Porównanie czasu działania algorytmów dla różnych instancji QAP\label{fig:time}}
			\end{figure}

		\subsubsection{Średnia jakość rozwiązania}Na rysunku \ref{fig:quality} pokazano porównanie średniej jakości rozwiązań generowanych przez algorytmy dla różnych instancji \emph{QAP}.
			\begin{figure}[h]
				\includegraphics[scale=0.90]{../results/quality}
				\caption{Porównanie średniej jakości rozwiązań generowanych przez algorytmy dla różnych instancji QAP\label{fig:quality}}
			\end{figure}

		\subsubsection{Jakość najlepszego rozwiązania}Na rysunku \ref{fig:best_quality} pokazano porównanie najlepszych jakości rozwiązań generowanych przez algorytmy dla różnych instancji \emph{QAP}.
		 	\begin{figure}[h]
				\includegraphics[scale=0.90]{../results/best_quality}
				\caption{Porównanie najlepszych jakości rozwiązań generowanych przez algorytmy dla różnych instancji QAP\label{fig:best_quality}}
			\end{figure}

		\subsubsection{Efektywność}Na rysunku \ref{fig:effectivenes} pokazano porównanie średniej efektywności (jakość/czas) algorytmów dla różnych instancji \emph{QAP}.
			\begin{figure}[h]
				\includegraphics[scale=0.90]{../results/effectivenes}
				\caption{Porównanie średniej efektywności (jakość/czas) algorytmów dla różnych instancji QAP\label{fig:effectivenes}}
			\end{figure}


	\subsection{Szczegółowa analiza algorytmu GS}

		\subsubsection{Jakość rozwiązania początkowego vs jakość rozwiązania końcowego}
			Na rysunkach \ref{fig:gs.nug24}, \ref{fig:gs.chr12a} i~\ref{fig:gs.esc16a} widać zależność między rozwiązaniem początkowym a~końcowym dla wybranych instancji.
			
			Dla większości instancji wykresy te były podobne do rys.~\ref{fig:gs.nug24}. Świadczy to o tym, że w~tych instancjach optima lokalne nie były dużo gorsze od optimum globalnego, pozwalając na znalezienie dobrego rozwiązania w~każdym przebiegu. Ciekawsze są rysunki \ref{fig:gs.chr12a} i~\ref{fig:gs.esc16a} -- w~instancji \emph{chr12a} jakość rozwiązań początkowych była zdecydowanie niższa, nie przekraczając 40\%. Nie zawsze też znalezione rozwiązanie było bliskie optimum, w~większości przypadków algorytm kończył pracę w~punktach o~ocenie między 40\% a~95\%. Świadczy to o~tym, że w~krajobrazie tej instancji istnieje wiele optimów lokalnych, często zdecydowanie gorszych od optimum globalnego. Z~kolei w~instancji \emph{esc16a} rozwiązania początkowe były dość dobrej jakości -- między 50\% a~80\% -- zbieżność do optimum również była o~wiele lepsza, żadne z~rozwiązań końcowych nie miało oceny gorszej niż 80\%, często również udawało się znaleźć optimum globalne. Z~rozmieszczenia punktów można też wnioskować, że istnieje pięc różnych optimum lokalnych (pod względem oceny), świadczy o~tym wrażenie umiejscowienia punktów danych na ,,siatce".
			
			\begin{figure}[h]
				\includegraphics[scale=0.90]{../results/gs_comparision_nug24.pdf}
				\caption{Zależność między rozwiązaniem startowym a~końcowym -- instancja \emph{nug24}\label{fig:gs.nug24}}				
			\end{figure}
			
			\begin{figure}[h]
				\includegraphics[scale=0.90]{../results/gs_comparision_chr12a.pdf}
				\caption{Zależność między rozwiązaniem startowym a~końcowym -- instancja \emph{chr12a}\label{fig:gs.chr12a}}				
			\end{figure}
			
			\begin{figure}[h]
				\includegraphics[scale=0.90]{../results/gs_comparision_esc16a.pdf}
				\caption{Zależność między rozwiązaniem startowym a~końcowym -- instancja \emph{esc16a}\label{fig:gs.esc16a}}				
			\end{figure}
		
		\subsubsection{Wpływ liczby restartów na jakość rozwiązania}		
			W przypadku większości testowanych instancji nie zauważono żadnego wpływu ilości restartów multi-random na jakość najlepszego znalezionego do danego momentu rozwiązania. Działo się tak dlatego, że w większości przypadków algorytmy już za pierwszym razem osiągały jakość  100\%  lub zbliżoną. Tak było np. w przypadku instancji \emph{kra30a} i \emph{bur26a}, co pokazano odpowiednio na rys. \ref{fig:mr.kra30a} i \ref{fig:mr.bur26a}. Tylko dla instancji \emph{chra12a} zauważono znaczącą poprawę wraz z kolejnymi uruchomieniami, co pokazano na rys. \ref{fig:mr.chr12a}  . Pierwsze rozwiązanie dla tej instancji miało jakość poniżej 70\% co umożliwiło poprawę rozwiązania aż do poziomu 100\%. Różnice te wynikają z odmiennego krajobrazu rozwiązań dla tych instancji: jak widać na rys. \ref{fig:mr.chr12a} jakość rozwiązania różni się znacznie w zależności od uruchomienia, czyli w zależności od punktu w którym algorytm zaczyna działać. Świadczy to o tym, że w krajobrazie rozwiązań jest dużo optimów lokalnych, w których algorytm "utyka". W przypadku pozostałych instancji krajobraz musi być bardziej "gładki" lub "wyższy". W pierwszym przypadku algorytm niezależnie od pkt. startowego znajduje optimum globalne  - stąd brak różnic w kolejnych uruchomieniach - tak jest w przypadku instancji \emph{bur26a} co widać na rys. \ref{fig:mr.bur26a}. W drugim wszystkie możliwe rozwiązania są blisko rozwiązania optymalnego i stąd poprawa jakości jest na tyle mała, że patrząc na wykresy wydaje się nieistotna - tak jest w przypadku instancji \emph{kra30a} co widać na rys \ref{fig:mr.kra30a}.
			\\Ciężko jednoznacznie określić kiedy przerwać ponowne uruchamianie algorytmu. Można kierowaź się jednym lub kilkoma z poniższych warunków:
			\begin{itemize}
				\item{odchylenie standardowe jakości rozwiązań jest mniejsze niż określony próg}
				\item{odległość najlepszego rozwiązania od optimum nie jest za mała}
				\item{tempo poprawy najlepszej jakości spada poniżej określonego progu}
				\item{całościowy czas wykonywania algorytmu przekracza wyznaczony próg}
				\item{algorytm osiąga porządaną jakość}
				\item{Po wykonaniu algorytmu n razy koszt jego wykonywania przekracza zyski z poprawy jakości (jeśli można je mierzyć tą samą miarą}
			\end{itemize}
			\begin{figure}[h]
				\includegraphics[scale=0.90]{../results/multirandom_kra30a.pdf}
				\caption{Zależność jakości średniego i najlepszego ze znalezionych dotychczas rozwiązań od liczby restartów w multi-random -- instancja \emph{kra30a}\label{fig:mr.kra30a}}		
			\end{figure}
			\begin{figure}[h]
				\includegraphics[scale=0.90]{../results/multirandom_bur26a.pdf}
				\caption{Zależność jakości średniego i najlepszego ze znalezionych dotychczas rozwiązań od liczby restartów w multi-random -- instancja \emph{bur26a}\label{fig:mr.bur26a}}		
			\end{figure}
			\begin{figure}[h]
				\includegraphics[scale=0.90]{../results/multirandom_chr12a.pdf}
				\caption{Zależność jakości średniego i najlepszego ze znalezionych dotychczas rozwiązań od liczby restartów w multi-random -- instancja \emph{chr12a}\label{fig:mr.chr12a}}		
			\end{figure}

	\subsection{Ocena podobieństwa rozwiązań}
\section{Podsumowanie}
	\subsection{Wnioski}
	\subsection{Trudności na jakie napotkano}
	\subsection{Propozycje ulepszeń}

%%%%%%%%%%%%%%%% literatura %%%%%%%%%%%%%%%%

\bibliography{sprawozdanie}
\bibliographystyle{plain}

\end{document}

